# vim: set ft=yaml ts=2 expandtab:
---

# copr on non RHELish systems does not make sense
#
- name: assert that we are on a RHELish system
  assert:
    that:
    - ansible_os_family == 'RedHat'

- name: include OS specific variables
  with_first_found:
  - "{{ ansible_os_family }}-{{ ansible_distribution_major_version }}.yml"
  - "{{ ansible_os_family }}.yml"
  include_vars:
    file: "{{ item }}"

- name: assert that we do not install on older RHEL
  assert:
    that:
    - ansible_distribution_major_version is version('7', '>=')
  when:
  - ansible_os_family == 'RedHat'
  - ansible_distribution != 'Fedora'

- name: copr plugin is installed
  package:
    name: "{{ copr_plugin }}"

...
